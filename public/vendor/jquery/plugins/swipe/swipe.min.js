(function(e){function w(t){return t&&t.allowPageScroll==undefined&&(t.swipe!=undefined||t.swipeStatus!=undefined)&&(t.allowPageScroll=s),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each(function(){var n=e(this),r=n.data(y);r||(r=new E(this,t),n.data(y,r))})}function E(b,w){function _(e){e=e.originalEvent;var t,n=p?e.touches[0]:e;S=f,p?T=e.touches.length:e.preventDefault(),distance=0,direction=null,duration=0,!p||T==w.fingers?(N.x=C.x=n.pageX,N.y=C.y=n.pageY,L=W(),w.swipeStatus&&(t=B(e,S))):H(e);if(t===!1)return S=h,B(e,S),t;E.bind(v,D),E.bind(m,P)}function D(e){e=e.originalEvent;if(S==c||S==h)return;var t,n=p?e.touches[0]:e;C.x=n.pageX,C.y=n.pageY,A=W(),direction=z(),p&&(T=e.touches.length),S=l,I(e,direction);if(T==w.fingers||!p){distance=R(),duration=q(),w.swipeStatus&&(t=B(e,S,direction,distance,duration));if(!w.triggerOnTouchEnd){var r=!F();j()===!0?(S=c,t=B(e,S)):r&&(S=h,B(e,S))}}else S=h,B(e,S);t===!1&&(S=h,B(e,S))}function P(e){e=e.originalEvent,e.preventDefault(),A=W(),distance=R(),direction=z(),duration=q();if(w.triggerOnTouchEnd||w.triggerOnTouchEnd==0&&S==l){S=c;if(T!=w.fingers&&!!p||C.x==0)S=h,B(e,S);else{var t=!F();if(j()!==!0&&j()!==null||!!t){if(t||j()===!1)S=h,B(e,S)}else B(e,S)}}else S==l&&(S=h,B(e,S));E.unbind(v,D,!1),E.unbind(m,P,!1)}function H(e){T=0,N.x=0,N.y=0,C.x=0,C.y=0,k.x=0,k.y=0,A=0,L=0}function B(e,s){var o;w.swipeStatus&&(o=w.swipeStatus.call(E,e,s,direction||null,distance||0,duration||0)),s==h&&w.click&&(T==1||!p)&&(isNaN(distance)||distance==0)&&(o=w.click.call(E,e,e.target));if(s==c){w.swipe&&(o=w.swipe.call(E,e,direction,distance,duration));switch(direction){case t:w.swipeLeft&&(o=w.swipeLeft.call(E,e,direction,distance,duration));break;case n:w.swipeRight&&(o=w.swipeRight.call(E,e,direction,distance,duration));break;case r:w.swipeUp&&(o=w.swipeUp.call(E,e,direction,distance,duration));break;case i:w.swipeDown&&(o=w.swipeDown.call(E,e,direction,distance,duration))}}(s==h||s==c)&&H(e);if(o!==undefined)return o}function j(){return w.threshold!==null?distance>=w.threshold:null}function F(){var e;return w.maxTimeThreshold?duration>=w.maxTimeThreshold?e=!1:e=!0:e=!0,e}function I(e,f){if(w.allowPageScroll==s)e.preventDefault();else{var l=w.allowPageScroll==a;switch(f){case t:(w.swipeLeft&&l||!l&&w.allowPageScroll!=o)&&e.preventDefault();break;case n:(w.swipeRight&&l||!l&&w.allowPageScroll!=o)&&e.preventDefault();break;case r:(w.swipeUp&&l||!l&&w.allowPageScroll!=u)&&e.preventDefault();break;case i:(w.swipeDown&&l||!l&&w.allowPageScroll!=u)&&e.preventDefault()}}}function q(){return A-L}function R(){return Math.round(Math.sqrt(Math.pow(C.x-N.x,2)+Math.pow(C.y-N.y,2)))}function U(){var e=N.x-C.x,t=C.y-N.y,n=Math.atan2(t,e),r=Math.round(n*180/Math.PI);return r<0&&(r=360-Math.abs(r)),r}function z(){var e=U();return e<=45&&e>=0?t:e<=360&&e>=315?t:e>=135&&e<=225?n:e>45&&e<135?i:r}function W(){var e=new Date;return e.getTime()}function X(){E.unbind(d,_),E.unbind(g,H),E.unbind(v,D),E.unbind(m,P)}var E=e(b),S="start",x=null,T=0,N={x:0,y:0},C={x:0,y:0},k={x:0,y:0},L=0,A=0,O;try{E.bind(d,_),E.bind(g,H)}catch(M){e.error("events not supported "+d+","+g+" on jQuery.swipe")}this.enable=function(){return E.bind(d,_),E.bind(g,H),E},this.disable=function(){return X(),E},this.destroy=function(){return X(),E.data(y,null),E}}var t="left",n="right",r="up",i="down",s="none",o="horizontal",u="vertical",a="auto",f="start",l="move",c="end",h="cancel",p="ontouchstart"in window,d=p?"touchstart":"mousedown",v=p?"touchmove":"mousemove",m=p?"touchend":"mouseup",g="touchcancel",y="TouchSwipe",b={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto"};e.fn.swipe=function(t){$this=e(this);var n=$this.data(y);if(n&&typeof t=="string"){if(n[t])return n[t].apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+t+" does not exist on jQuery.swipe")}else if(!n&&(typeof t=="object"||!t))return w.apply(this,arguments)},e.fn.swipe.defaults=b,e.fn.swipe.phases={PHASE_START:f,PHASE_MOVE:l,PHASE_END:c,PHASE_CANCEL:h},e.fn.swipe.directions={LEFT:t,RIGHT:n,UP:r,DOWN:i},e.fn.swipe.pageScroll={NONE:s,HORIZONTAL:o,VERTICAL:u,AUTO:a}})(jQuery)